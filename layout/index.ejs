<% if(theme.use_issue) { %>
<%- partial('_partial/issue') %>
<% } %>
<div id="article-list">
     <%
        // 如果要置顶文章, 就在front-matter上设置 top: true
        // 一般置顶文章一篇就够了吧2333
        // 关键还是置顶文章是从文章抽出来的, 如果某一分页段的置顶文章过多
        // 可能会造成某一分页的文章数目较多, 不过问题应该不大
        if (page.prev === 0) {
            var topPosts = site.posts.filter(function (post) {
                return typeof post.top !== 'undefined' && post.top === true
            }).sort('date', -1)
            topPosts.forEach(function (post) { %>
            <%- partial('_partial/excerpt', { item: post, top: true }) %>
            <% })
        } %>
     <% 
        // prepare a shuffled pool of default previews to avoid repeated previews across posts
        var previewPool = [];
        if (theme.default_preview && theme.default_preview.length) {
            previewPool = theme.default_preview.slice();
            for (var i = previewPool.length - 1; i > 0; i--) {
                var j = Math.floor(Math.random() * (i + 1));
                var tmp = previewPool[i];
                previewPool[i] = previewPool[j];
                previewPool[j] = tmp;
            }
        }
        var assignCounter = 0;
     %>
     <% page.posts.filter(function (post) {
         return typeof post.top === 'undefined' || post.top === false
     }).forEach(function (post) { %>
     <%- partial('_partial/excerpt', { item: post, previewPool: previewPool, previewAssignIndex: assignCounter++ }) %>
     <% }) %>
</div>
<%- partial('_partial/pagination', { page: page }) %>
<!-- 加上这段代码原因： gitment在首页加载时, 如果找不到对应的控件会报错，此处加上，同时设置为none，防止报错 -->   
<% if(theme.use_comment === true) { %>  
    <div id="comments-template" style="display:none"></div> 
<% } %>